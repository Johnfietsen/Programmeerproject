/*
* University:	University of Amsterdam
* Study:		Minor Programming
* Course:		Programmeerproject
* Name:			Luc Stefelmanns
* Student nr.:	10669124
*/

<!DOCTYPE html>
<meta charset="utf-8">
<style>
    body {font-family: 'Verdana';}
</style>
<svg width="1200" height="900"></svg>
<script src=d3.js></script>
<script>

var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

var simulation = d3.forceSimulation()
    .force("link", d3.forceLink().id(function(d) { return d.id; }))
    .force("charge", d3.forceManyBody().strength(-400))
    .force("center", d3.forceCenter(width / 2, height / 2));


var colour = d3.scaleLinear()
				.range(["#ccece6", "#005824"])
				.domain([0, 100]);


d3.json("hillclimber.json", function(error, graph) {
  if (error) throw error;

  graph.links.forEach(function(d){
    d.source = d.source_id;
    d.target = d.target_id;
  });

  var link = svg.append("g")
                .style("stroke", "#aaa")
                .selectAll("line")
                .data(graph.links)
                .enter().append("line");

  var node = svg.append("g")
	            .attr("class", "nodes")
	  			.selectAll("circle")
	            .data(graph.nodes)
	  			.enter().append("circle")
	          	.attr("r", 10);

  var label = svg.append("g")
      			.attr("class", "labels")
			    .selectAll("text")
			    .data(graph.nodes)
			    .enter().append("text")
		        .attr("class", "label")
		        .text(function(d) { return d.name; });

  simulation
      .nodes(graph.nodes)
      .on("tick", ticked);

  simulation.force("link")
      .links(graph.links);

  function ticked() {
    link
        .attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node
         .attr("r", 10)
         .style("fill", function(d){ if (d.trade_ofGDP == 'Unknown') {
			 							return "white"; }
									 else {
									 	return colour(d.trade_ofGDP); };})
         .style("stroke", "#969696")
         .style("stroke-width", "1px")
         .attr("cx", function(d) { return d.x+2; })
         .attr("cy", function(d) { return d.y-2; });

    label
    		.attr("x", function(d) { return d.x; })
            .attr("y", function (d) { return d.y; })
            .style("font-size", "10px").style("fill", "black");
  }
});


</script>
